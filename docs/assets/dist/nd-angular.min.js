/*! nd-angular - v0.0.0 - 2015-11-09 - () */
!function(){"use strict";angular.module("duck-angular").controller("duckFolderSelectController",a),a.$inject=["duckClient","$log","$scope"];function a(a,b,c){var d=this;d.dir=d.dir,d.dialogPicked=e,d.startChoose=f,g();function e(a){a&&a.files&&a.files[0]&&(d.dir=a.files[0].path,c.$apply())}function f(a){a.target.children[0].click()}function g(){a.uiActions.fsGetWorkingDir().then(function(a){d.dir=a})}}}(),function(){"use strict";var a=document.currentScript.src;angular.module("duck-angular").directive("duckFolderSelect",function(){return{scope:{dir:"=dir"},bindToController:!0,controllerAs:"vm",controller:"duckFolderSelectController",templateUrl:a.replace(".js",".html")}})}(),function(){angular.module("duck-angular").controller("ModalController",a),a.$inject=["duckClient","duckModal"];function a(a,b){var c=this;c.resolve=b.resolve,c.cancel=b.cancel,d();function d(){}}}(),function(){var a=document.currentScript.src;angular.module("duck-angular").directive("duckModal",b),b.$inject=[];function b(){return{scope:{title:"@",flags:"@"},controllerAs:"modalVm",bindToController:!0,controller:"ModalController",transclude:!0,templateUrl:a.replace(".js",".html")}}}(),function(){angular.module("duck-angular").controller("DirectoryController",a),a.$inject=["duckClient","$scope","$q"];function a(a,b,c){var d=this;d.dir="";var e=d.settings.hasOwnProperty("sets")?d.settings.sets:"installDir",f=c.when();g();function g(){b.$watch(function(){return d.dir},function(){var b={};b[e]=d.dir,f.then(function(){a.uiActions.setUserSettings(b)})})}}}(),function(){var a=document.currentScript.src;angular.module("duck-angular").directive("duckDirectory",function(){return{scope:{settings:"="},bindToController:!0,controllerAs:"vm",controller:"DirectoryController",templateUrl:a.replace(".js",".html")}})}(),function(){var a=document.currentScript.src;angular.module("duck-angular").directive("duckLoader",b),b.$inject=["duckClient"];function b(b){return{scope:{},controller:c,templateUrl:a.replace(".js",".html")}}c.$inject=["duckPager","duckClient"];function c(a,b){a.show(),b.goNextPage()}}(),function(){angular.module("duck-angular").controller("DuckProgressController",a),a.$inject=["duckJobManager","duckPager","$scope"];function a(a,b,c){var d=this;d.estimate="",d.title=0,d.progress=0,f();function e(a){null!==a&&(d.progress=a.progress,d.title=""+a.progress+" % done",100===a.progress?(d.estimate="",b.setNextEnabled=!0):d.estimate=""+a.estimate+" seconds remaining")}function f(){b.setNextEnabled=!1,b.setBackEnabled=!1,c.$watch(function(){return a.getJobProgress(d.settings.job)},e),a.startJob(d.settings.job)}}}(),function(){var a=document.currentScript.src;angular.module("duck-angular").directive("duckProgress",b),b.$inject=[];function b(){return{scope:{settings:"="},bindToController:!0,controllerAs:"vm",controller:"DuckProgressController",templateUrl:a.replace(".js",".html")}}}(),function(){angular.module("duck-angular").controller("PagerController",a),a.$inject=["duckClient","duckPager"];function a(a,b){var c=this;c.isBackEnabled=function(){return b.isBackEnabled()},c.isNextEnabled=function(){return b.isNextEnabled()},c.goBackPage=function(){return b.goBackPage()},c.goNextPage=function(){return b.goNextPage()},c.showPager=function(){return b.isVisble()},d();function d(){}function e(a){}}}(),function(){var a=document.currentScript.src;angular.module("duck-angular").directive("duckPager",["duckClient",function(b){return{scope:{},controller:"PagerController",controllerAs:"vm",templateUrl:a.replace(".js",".html")}}])}(),function(){angular.module("duck-angular").factory("duckJobManager",a),a.$inject=["duckEvents","duckLogger","$rootScope","duckClient"];function a(a,b,c,d){var e;return j(),{getJobProgress:g,startJob:f};function f(a){return e.hasOwnProperty(a)?void b.debug(a+" already in job queue"):void d.uiActions.startJob(a)}function g(a){return e.hasOwnProperty(a)?e[a]:null}function h(a){var b=a.value.jobName;e.hasOwnProperty(b)&&100===e[b].progress||(e[b]={progress:parseInt(100*a.value.progress),estimate:parseInt(a.value.estimateLeft)})}function i(a){var b=a.value.jobName;e[b]={progress:100,estimate:0}}function j(){d.persistentData.hasOwnProperty("jobs")||(d.persistentData.jobs={}),e=d.persistentData.jobs,c.$on("JobProgress",function(a,b){h(b)}),c.$on("JobDone",function(a,b){i(b)})}}}(),function(){angular.module("duck-angular").factory("duckModal",a),a.$inject=["$modal","$q"];function a(a,b){var c;return{showModal:f,resolve:d,cancel:e};function d(a){c.close(a)}function e(a){c.dismiss(a)}function f(d){return c?b.reject("already open"):(d.hasOwnProperty("size")||(d.size="sm"),d.hasOwnProperty("animation")||(d.animation=!1),d.hasOwnProperty("windowClass")||(d.windowClass="modal duck-modal modal-show"),c=a.open(d),c.result["finally"](function(){c=null}))}}}(),function(){angular.module("duck-angular").factory("duckPager",a),a.$inject=["duckPages","duckLogger","$state"];function a(a,b,c){var d=0,e=!1,f=!0,g=[];return{show:o,hide:p,getVisible:function(){return e},getPageIdx:function(){return d},isBackEnabled:j,isNextEnabled:k,gotoPageNumber:i,goNextPage:l,goBackPage:m,setNextEnabled:h,registerChangeCallback:q};function h(a){f=a}function i(d){d>=0&&d<a.length&&(b.debug("going to page "+d),c.go(a[d].name),n())}function j(){return d>0}function k(){return f&&d+1<a.length}function l(){k()&&(d+=1,i(d))}function m(){this.isBackEnabled()&&(d-=1,i(d))}function n(){angular.forEach(g,function(a,b){a(e,d)})}function o(){e=!0,n()}function p(){e=!1,n()}function q(a){g.push(a)}}}(),function(){angular.module("duck-angular").factory("duckUIActionsRegister",duckUIActionsRegister),duckUIActionsRegister.$inject=["$q"];function duckUIActionsRegister($q){return{registerUiActions:registerUiActions};function getCallUiActionClosure(a,b){return function(c){return $q(function(d,e){b(a,c,function(a,b){return a?void e(a):void d(b)})})}}function registerUiActions(uiActionsMeta,callUiActionCallback,to){for(var actionName in uiActionsMeta)!function(){var action=uiActionsMeta[actionName],actionFunc=getCallUiActionClosure(action.name,callUiActionCallback),paramArrayStr=action.paramNames.join(","),functionStr="(function ui_action_"+action.name+"("+paramArrayStr+"){return actionFunc(arguments);})";to[action.name]=eval(functionStr)}()}}}(),function(){angular.module("duck-angular").factory("duckEvents",a),a.$inject=["$rootScope","$interval","duckLogger","duckClient"];function a(a,b,c,d){var e=0,f=!0;return h(),{};function g(){f&&(f=!1,d.uiActions.getNotificationsFromIdx(e).then(function(b){e+=b.length,angular.forEach(b,function(b,d){a.$emit(b.name,b),c.debug("sending event "+angular.toJson(b))}),f=!0}))}function h(){b(g,200)}}}(),angular.module("app").run(["$templateCache",function(a){"use strict";a.put("src/directives/folder_select/folder_select.html",'<input ng-model="vm.dir" ng-model-options="{ debounce: 1000 }" />\r\n<div onclick="this.children[0].click()">Choose\r\n	<input type="file" nwdirectory onchange="angular.element(this).scope().vm.dialogPicked(this)" ng-hide="true" />\r\n</div>\r\n\r\n'),a.put("src/directives/modal/modal.html",'<div>\r\n	<div class="modal-header">\r\n		<h3 class="modal-title">{{modalVm.title}}</h3>\r\n	</div>\r\n	<div class="modal-body">\r\n		<ng-transclude></ng-transclude>\r\n	</div>\r\n	<div class="modal-footer">\r\n		<button class="btn" ng-click="modalVm.resolve(\'ok\')">OK</button>\r\n		<button class="btn" ng-click="modalVm.resolve(\'cancel\')">Cancel</button>\r\n	</div>\r\n</div>'),a.put("src/directives/page_directives/directory/directory.html",'Installation Dir:\r\n\r\n<!--div js-tree="vm.treeConfig" should-apply="vm.applyModelChanges()" ng-model="vm.treeData" ></div-->\r\n<duck-folder-select dir=\'vm.dir\'></duck-folder-select>\r\n'),a.put("src/directives/page_directives/loader/loader.html",'loading installer...\r\n<div class="loading-wheel"></div>'),a.put("src/directives/page_directives/progress/progress.html",'\r\n<progressbar max="100" value="vm.progress"><span style="color:black; white-space:nowrap;">{{vm.title}}</span></progressbar>\r\n{{vm.estimate}}'),a.put("src/directives/pager/pager.html",'<div class="pager" ng-show="vm.showPager"><ul class="pager">\r\n	<li class="previous" ng-class="{disabled:!vm.isBackEnabled()}" ng-click="vm.goBackPage()">\r\n		<a href="javascript:void(0);"><span aria-hidden="true">&larr;</span> Back</a>\r\n	</li>\r\n	<li class="next" ng-class="{disabled:!vm.isNextEnabled()}" ng-click="vm.goNextPage()">\r\n		<a href="javascript:void(0);">Next <span aria-hidden="true">&rarr;</span></a>\r\n	</li>\r\n	</ul> \r\n</div>')}]);